import{ac as w,r as v,n as C,o as r,c as u,d as s,w as l,f as k,aj as N,S as q,e as h,ak as y,al as $,af as t,W as b,am as B,an as R,t as o,a2 as p,j as d,k as x,ao as S,ap as T}from"./index.1a0de457.js";const j={id:"cart"},z=t("h1",{class:"text-center"},"Cart\u8CFC\u7269\u8ECA",-1),D=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"\u5716\u7247"),t("th",{class:"text-center"},"\u5546\u54C1\u540D\u7A31"),t("th",{class:"text-center"},"\u55AE\u50F9"),t("th",{class:"text-center"},"\u6578\u91CF"),t("th",{class:"text-center"},"\u5C0F\u8A08"),t("th",{class:"text-center"},"\u64CD\u4F5C")])],-1),E={style:{color:"aqua"}},P={class:"text-center"},A={class:"text-center"},F={class:"text-center"},I=x("\u522A\u9664"),L={key:0,colspan:"6"},O=t("h3",{class:"text-center"},"NoProduct //\u6C92\u6709\u5546\u54C1",-1),U=[O],W=x("\u7D50\u5E33"),K={__name:"CartView",setup(G){const f=w(),c=v([]),g=C(()=>c.reduce((a,n)=>a+n.product.price*n.quantity,0)),V=C(()=>c.length>0&&!c.some(a=>!a.product.sell)),i=async(a,n)=>{const e=await f.updateCart({product:c[a].product._id,quantity:n});console.log(e),e&&(n===0?c.splice(a,1):c[a].quantity=n)};return(async()=>{try{const{data:a}=await N.get("/users/cart");c.push(...a.result)}catch{q.fire({title:"ERROR //\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}})(),(a,n)=>(r(),u("div",j,[s(k,null,{default:l(()=>[s(h,{cols:"12"},{default:l(()=>[z]),_:1}),s(y),s(h,{cols:"12"},{default:l(()=>[s($,null,{default:l(()=>[D,t("tbody",E,[(r(!0),u(b,null,B(c,(e,_)=>(r(),u("tr",{key:e._id,class:S({"bg-red":!e.product.sell})},[t("td",null,[s(T,{src:e.product.image,"max-width":"100","max-height":"100"},null,8,["src"])]),t("td",P,o(e.product.name),1),t("td",A,o(e.product.price),1),t("td",null,[s(k,{class:"justify-center align-center"},{default:l(()=>[s(d,{icon:"mdi-minus",size:"small",variant:"outlined",class:"mx-2",onClick:m=>i(_,e.quantity-1)},null,8,["onClick"]),x(" "+o(e.quantity)+" ",1),s(d,{icon:"mdi-plus",size:"small",variant:"outlined",class:"mx-2",onClick:m=>i(_,e.quantity+1)},null,8,["onClick"])]),_:2},1024)]),t("td",F,"NT$ "+o(e.product.price*e.quantity),1),t("td",null,[s(d,{class:"mx-auto",onClick:m=>i(_,0)},{default:l(()=>[I]),_:2},1032,["onClick"])])],2))),128)),t("tr",null,[c.length===0?(r(),u("td",L,U)):R("",!0)])])]),_:1})]),_:1}),s(y),s(h,{cols:"12",class:"text-center"},{default:l(()=>[t("p",null,"\u7E3D\u91D1\u984D : NT$ "+o(p(g)),1),s(d,{class:"w-100 mt-16 mx-auto",onClick:p(f).checkout,disabled:!p(V)},{default:l(()=>[W]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]))}};export{K as default};
