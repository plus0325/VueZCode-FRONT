import{ab as w,ac as V,r as N,n as k,b as q,o as d,c as v,d as t,w as e,V as T,aj as $,S as B,C as S,e as o,g as j,ak as x,al as P,a4 as R,am as I,af as n,an as r,I as f,j as u,k as m,f as h,ao as z,ap as A,aq as D}from"./index.c6a848c1.js";import{V as E}from"./VAlert.98aea357.js";const F={id:"cart"},L=m("Cart"),O=m(" // \u6C92\u6709\u5546\u54C1 NoProduct "),U={class:"pb-2 text-subtitle-2"},W={class:"d-flex h-100 align-center text-grey-darken-2"},G={class:"pr-5 text-subtitle-2"},H={class:"d-flex align-center quantity-btn justify-space-between"},J={class:"text-subtitle-2 font-weight-bold"},K=m("\u7D50\u5E33"),M={__name:"CartView",setup(Q){const C=V(),l=N([]),b=k(()=>l.reduce((a,c)=>a+c.product.price*c.quantity,0)),y=k(()=>l.length>0&&!l.some(a=>!a.product.sell)),_=async(a,c)=>{const i=await C.updateCart({product:l[a].product._id,quantity:c});console.log(i),i&&(c===0?l.splice(a,1):l[a].quantity=c)};return(async()=>{try{const{data:a}=await $.get("/users/cart");l.push(...a.result)}catch{B.fire({title:"ERROR //\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}})(),(a,c)=>{const i=q("TitlePart");return d(),v("div",F,[t(S),t(T,null,{default:e(()=>[t(o,null,{default:e(()=>[t(i,null,{text:e(()=>[L]),_:1})]),_:1}),t(j,{color:"white",class:"pa-10",rounded:"xl"},{default:e(()=>[l.length===0?(d(),x(E,{key:0,border:"top",prominent:"",variant:"outlined",type:"warning",color:"black",class:"text-center text-subtitle-2"},{default:e(()=>[O]),_:1})):P("",!0),(d(!0),v(R,null,I(l,(s,p)=>(d(),x(h,{key:s._id,class:D([{"bg-red":!s.product.sell},"align-center mb-10"])},{default:e(()=>[t(o,{cols:"12",md:"6"},{default:e(()=>[t(h,{class:"align-center"},{default:e(()=>[t(o,{class:"pa-0",cols:"4"},{default:e(()=>[t(z,{src:s.product.image,"max-width":"100",height:"70"},null,8,["src"])]),_:2},1024),t(o,{cols:"8"},{default:e(()=>[n("h3",U,r(s.product.name),1),n("div",W,[n("p",G,"NT$ "+r(s.product.price),1),t(u,{onClick:g=>_(p,0),icon:"mdi-delete-forever",variant:"text",size:"x-small",id:"mdi-delete-forever"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(o,{cols:"12",md:"6",class:"pa-3"},{default:e(()=>[t(h,{class:"align-end align-md-center justify-space-between pb-4"},{default:e(()=>[n("div",H,[n("span",null,[t(u,{variant:"text",icon:"mdi-minus",onClick:g=>_(p,s.quantity-1)},null,8,["onClick"])]),n("span",null,r(s.quantity),1),n("span",null,[t(u,{variant:"text",icon:"mdi-plus",onClick:g=>_(p,s.quantity+1)},null,8,["onClick"])])]),n("div",J,"\u5C0F\u8A08 NT$ "+r(s.product.price*s.quantity),1)]),_:2},1024)]),_:2},1024),t(A,{thickness:"1px",color:"black"})]),_:2},1032,["class"]))),128)),t(o,{cols:"12",class:"text-center mt-8"},{default:e(()=>[n("h4",null,"\u7E3D\u91D1\u984D : NT$ "+r(f(b)),1),t(u,{class:"w-100 mt-16 mx-auto",onClick:f(C).checkout,disabled:!f(y),color:"yellow"},{default:e(()=>[K]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})])}}};var tt=w(M,[["__scopeId","data-v-5cf9a12a"]]);export{tt as default};
