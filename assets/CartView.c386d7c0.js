import{ac as w,ad as V,r as N,q as k,b as q,o as d,c as v,d as t,w as e,V as T,ak as $,S as B,C as S,e as o,g as P,al as x,am as R,a5 as j,an as z,ag as n,ao as r,J as f,j as u,k as m,f as h,ap as A,aq as D,ar as E}from"./index.4784562d.js";import{V as I}from"./VAlert.95285453.js";const F={id:"cart"},J=m("Cart"),L=m(" // \u6C92\u6709\u5546\u54C1 NoProduct "),O={class:"pb-2 text-subtitle-2"},U={class:"d-flex h-100 align-center text-grey-darken-2"},W={class:"pr-5 text-subtitle-2"},G={class:"d-flex align-center quantity-btn justify-space-between"},H={class:"text-subtitle-2 font-weight-bold"},K=m("\u7D50\u5E33"),M={__name:"CartView",setup(Q){const C=V(),l=N([]),y=k(()=>l.reduce((a,c)=>a+c.product.price*c.quantity,0)),b=k(()=>l.length>0&&!l.some(a=>!a.product.sell)),_=async(a,c)=>{const i=await C.updateCart({product:l[a].product._id,quantity:c});console.log(i),i&&(c===0?l.splice(a,1):l[a].quantity=c)};return(async()=>{try{const{data:a}=await $.get("/users/cart");l.push(...a.result)}catch{B.fire({title:"ERROR //\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}})(),(a,c)=>{const i=q("TitlePart");return d(),v("div",F,[t(S),t(T,null,{default:e(()=>[t(o,null,{default:e(()=>[t(i,null,{text:e(()=>[J]),_:1})]),_:1}),t(P,{color:"white",class:"pa-10",rounded:"xl"},{default:e(()=>[l.length===0?(d(),x(I,{key:0,border:"top",prominent:"",variant:"outlined",type:"warning",color:"black",class:"text-center text-subtitle-2"},{default:e(()=>[L]),_:1})):R("",!0),(d(!0),v(j,null,z(l,(s,p)=>(d(),x(h,{key:s._id,class:E([{"bg-red":!s.product.sell},"align-center mb-10"])},{default:e(()=>[t(o,{cols:"12",md:"6"},{default:e(()=>[t(h,{class:"align-center"},{default:e(()=>[t(o,{class:"pa-0",cols:"4"},{default:e(()=>[t(A,{src:s.product.image,"max-width":"100",height:"70"},null,8,["src"])]),_:2},1024),t(o,{cols:"8"},{default:e(()=>[n("h3",O,r(s.product.name),1),n("div",U,[n("p",W,"NT$ "+r(s.product.price),1),t(u,{onClick:g=>_(p,0),icon:"mdi-delete-forever",variant:"text",size:"x-small",id:"mdi-delete-forever"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(o,{cols:"12",md:"6",class:"pa-3"},{default:e(()=>[t(h,{class:"align-end align-md-center justify-space-between pb-4"},{default:e(()=>[n("div",G,[n("span",null,[t(u,{variant:"text",icon:"mdi-minus",onClick:g=>_(p,s.quantity-1)},null,8,["onClick"])]),n("span",null,r(s.quantity),1),n("span",null,[t(u,{variant:"text",icon:"mdi-plus",onClick:g=>_(p,s.quantity+1)},null,8,["onClick"])])]),n("div",H,"\u5C0F\u8A08 NT$ "+r(s.product.price*s.quantity),1)]),_:2},1024)]),_:2},1024),t(D,{thickness:"1px",color:"black"})]),_:2},1032,["class"]))),128)),t(o,{cols:"12",class:"text-center mt-8"},{default:e(()=>[n("h4",null,"\u7E3D\u91D1\u984D : NT$ "+r(f(y)),1),t(u,{class:"w-100 mt-16 mx-auto",onClick:f(C).checkout,disabled:!f(b),color:"yellow"},{default:e(()=>[K]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})])}}};var tt=w(M,[["__scopeId","data-v-5cf9a12a"]]);export{tt as default};
