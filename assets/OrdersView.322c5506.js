import{x as L,L as D,H as q,n as R,y as F,a7 as j,d as e,a4 as P,a5 as $,ab as H,r as w,a as M,o as r,c as d,w as a,f as z,aj as E,S as I,e as C,ap as N,aT as J,af as s,am as T,I as Q,al as h,g as K,i as W,aH as X,h as Y,V as U,aJ as Z,j as S,br as ee,k as u,an as g,Q as v,ad as te,ae as le}from"./index.1a6595a8.js";import{V as ae,a as oe}from"./VPagination.f0468fd6.js";import{m as se,f as ne,a as ie,b as re,V as de}from"./VInput.545fd429.js";import{m as ue,f as ce,a as _e}from"./VSelectionControl.98df29f6.js";import{V as y}from"./VRadio.3b23e3ae.js";import{v as me}from"./index.dae76202.js";const fe=L({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...se(),...ue(),trueIcon:{type:D,default:"$radioOn"},falseIcon:{type:D,default:"$radioOff"},type:{type:String,default:"radio"}},setup(i,c){let{attrs:l,slots:_}=c;const f=q(),V=R(()=>i.id||`radio-group-${f}`);return F(()=>{const[x,k]=j(l),[O,n]=ne(i),[o,t]=ce(i),m=_.label?_.label({label:i.label,props:{for:V.value}}):i.label;return e(re,$({class:"v-radio-group"},x,O,{id:V.value}),{..._,default:p=>{let{id:A,isDisabled:B,isReadonly:G}=p;return e(P,null,[m&&e(ie,{for:A.value},{default:()=>[m]}),e(_e,$(o,{id:A.value,trueIcon:i.trueIcon,falseIcon:i.falseIcon,type:i.type,disabled:B.value,readonly:G.value},k),_)])}})}),{}}}),b=i=>(te("data-v-57fd6f4f"),i=i(),le(),i),pe={id:"orders"},ge=b(()=>s("h1",{class:"text-center"},"\u7BA1\u7406\u8005\u8A02\u55AE\u7BA1\u7406",-1)),he=b(()=>s("thead",null,[s("tr",null,[s("th",null,"\u8A02\u55AE\u7DE8\u865F"),s("th",null,"\u8A02\u8CFC\u6703\u54E1"),s("th",null,"\u8A02\u8CFC\u65E5\u671F"),s("th",null,"\u8A02\u55AE\u91D1\u984D"),s("th",null,"\u5546\u54C1\u540D\u7A31"),s("th",null,"\u8655\u7406\u72C0\u614B"),s("th",null,"\u7BA1\u7406")])],-1)),Ve={key:0},ve={key:1},ye={key:2},be=u("mdi-comment-outline"),xe=u("\u8A02\u55AE\u78BA\u8A8D\u4E2D "),ke={key:3},we=u("mdi-comment-processing-outline"),Ie=u("\u5546\u54C1\u51FA\u8CA8\u4E2D "),Ce={key:4},Se=u("mdi-comment-check-outline"),Re=u("\u8A02\u55AE\u5DF2\u5B8C\u6210 "),Pe={key:5},Oe=u("mdi-comment-remove-outline"),Ae=u("\u8A02\u55AE\u5DF2\u53D6\u6D88 "),De=u("\u7DE8\u8F2F"),$e={key:0},ze=b(()=>s("td",{colspan:"5"},[s("h3",{class:"text-center"},"\u6C92\u6709\u8A02\u55AE")],-1)),Ee=[ze],Ne=b(()=>s("div",{class:"text-h5 font-weight-bold text-center py-5"},"\u7DE8\u8F2F\u8A02\u55AE",-1)),Te=u("\u53D6\u6D88"),Ue=u("\u78BA\u8A8D\u9001\u51FA"),Be={__name:"OrdersView",setup(i){const c=w([]),l=w({_id:"",email:"",tone:"",category:"\u8A02\u55AE\u78BA\u8A8D\u4E2D",dialog:!1,valid:!1,submitting:!1,idx:-1});w({required(n){return!!n||"\u5FC5\u586B"},email(n){return me.exports.isEmail(n)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4"}});const _=5,f=M(1),V=R(()=>c.slice(f.value*_-_,f.value*_));R(()=>c.slice(0).reverse());const x=(n,o)=>{l._id=c[o]._id,l.tone=c[o].tone,l.idx=o,l.dialog=!0,l.valid=!1,l.submitting=!1},k=async()=>{l.submitting=!0;try{const{data:n}=await E.patch("/orders/"+l._id,l);c[l.idx].tone=n.result.tone,I.fire({title:"success //\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),l.dialog=!1}catch(n){I.fire({title:"ERROR //\u5931\u6557",text:n.isAxiosError?n.response.data.message:n.message})}l.submitting=!1};return(async()=>{try{const{data:n}=await E.get("/orders/all");c.push(...n.result.map(o=>(o.totalPrice=o.products.reduce((t,m)=>t+m.product.price*m.quantity,0),o)))}catch(n){console.log(n),I.fire({title:"ERROR //\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(n,o)=>(r(),d("div",pe,[e(z,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[ge]),_:1}),e(N),e(C,{cols:"12"},{default:a(()=>[e(J,null,{default:a(()=>[he,s("tbody",null,[(r(!0),d(P,null,T(Q(V),(t,m)=>(r(),d("tr",{key:t._id},[s("td",null,g(t._id),1),t.user===null?(r(),d("td",Ve,"\u5E33\u865F\u5DF2\u7D93\u522A\u9664")):(r(),d("td",ve,g(t.user.email),1)),s("td",null,g(new Date(t.date).toLocaleDateString()),1),s("td",null,g(t.totalPrice),1),s("td",null,[s("ul",null,[(r(!0),d(P,null,T(t.products,p=>(r(),d("li",{key:p._id},g(p.product.name)+" x "+g(p.quantity),1))),128))])]),t.tone===0?(r(),d("td",ye,[e(v,{size:"x-large",start:"",color:"red"},{default:a(()=>[be]),_:1}),xe])):h("",!0),t.tone===1?(r(),d("td",ke,[e(v,{size:"x-large",start:"",color:"yellow"},{default:a(()=>[we]),_:1}),Ie])):h("",!0),t.tone===2?(r(),d("td",Ce,[e(v,{size:"x-large",start:"",color:"green"},{default:a(()=>[Se]),_:1}),Re])):h("",!0),t.tone===3?(r(),d("td",Pe,[e(v,{size:"x-large",start:"",color:"blue"},{default:a(()=>[Oe]),_:1}),Ae])):h("",!0),s("td",null,[e(S,{onClick:p=>x(t._id,m),variant:"outlined",plain:"",size:"x-small",rounded:"lg"},{default:a(()=>[De]),_:2},1032,["onClick"])])]))),128)),c.length===0?(r(),d("tr",$e,Ee)):h("",!0)])]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=t=>f.value=t),length:Math.ceil(c.length/_),rounded:"circle",class:"ma-5"},null,8,["modelValue","length"]),e(oe,{modelValue:l.dialog,"onUpdate:modelValue":o[4]||(o[4]=t=>l.dialog=t)},{default:a(()=>[e(K,{rounded:"xl",width:"300"},{default:a(()=>[e(de,{modelValue:l.valid,"onUpdate:modelValue":o[3]||(o[3]=t=>l.valid=t),onSubmit:W(k,["prevent"])},{default:a(()=>[e(X,null,{default:a(()=>[Ne,e(N)]),_:1}),e(Y,null,{default:a(()=>[e(U,null,{default:a(()=>[e(z,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[e(fe,{modelValue:l.tone,"onUpdate:modelValue":o[1]||(o[1]=t=>l.tone=t),mandatory:""},{default:a(()=>[e(y,{label:"\u8A02\u55AE\u78BA\u8A8D\u4E2D",color:"red",value:"0"}),e(y,{label:"\u5546\u54C1\u51FA\u8CA8\u4E2D",color:"yellow",value:"1"}),e(y,{label:"\u8A02\u55AE\u5DF2\u5B8C\u6210",color:"green",value:"2"}),e(y,{label:"\u8A02\u55AE\u5DF2\u53D6\u6D88",color:"blue",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Z,null,{default:a(()=>[e(U,{class:"d-flex mt-n16"},{default:a(()=>[e(S,{onClick:o[2]||(o[2]=t=>l.dialog=!1),color:"red",variant:"tonal",disadled:l.submitting},{default:a(()=>[Te]),_:1},8,["disadled"]),e(ee),e(S,{type:"submit",variant:"tonal",loading:l.submitting,color:"green"},{default:a(()=>[Ue]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]))}};var Me=H(Be,[["__scopeId","data-v-57fd6f4f"]]);export{Me as default};
