import{y as F,N as A,I as L,q as R,z as M,a8 as j,d as e,a5 as P,a6 as D,ac as J,r as w,a as K,o as i,c as r,w as a,f as $,ak as N,S as C,e as S,aq as U,aU as H,ag as s,an as q,J as Q,am as h,g as W,i as X,aI as Y,h as Z,V as B,aK as ee,j as y,bs as te,k as u,ao as g,R as b,al as E,ae as le,af as ae}from"./index.4784562d.js";import{V as oe,a as se}from"./VPagination.d8f6a9a9.js";import{m as ne,f as ie,a as de,b as re,V as ue}from"./VInput.8cc012d9.js";import{m as ce,f as _e,a as me}from"./VSelectionControl.12049a27.js";import{V as k}from"./VRadio.8ce49a91.js";import{v as fe}from"./index.dae76202.js";const pe=F({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...ne(),...ce(),trueIcon:{type:A,default:"$radioOn"},falseIcon:{type:A,default:"$radioOff"},type:{type:String,default:"radio"}},setup(d,c){let{attrs:l,slots:_}=c;const m=L(),V=R(()=>d.id||`radio-group-${m}`);return M(()=>{const[v,I]=j(l),[O,n]=ie(d),[o,t]=_e(d),f=_.label?_.label({label:d.label,props:{for:V.value}}):d.label;return e(re,D({class:"v-radio-group"},v,O,{id:V.value}),{..._,default:p=>{let{id:z,isDisabled:G,isReadonly:T}=p;return e(P,null,[f&&e(de,{for:z.value},{default:()=>[f]}),e(me,D(o,{id:z.value,trueIcon:d.trueIcon,falseIcon:d.falseIcon,type:d.type,disabled:G.value,readonly:T.value},I),_)])}})}),{}}}),x=d=>(le("data-v-f7ddd67c"),d=d(),ae(),d),ge={id:"orders"},he=x(()=>s("h1",{class:"text-center"},"\u7BA1\u7406\u8005\u8A02\u55AE\u7BA1\u7406",-1)),Ve=x(()=>s("thead",null,[s("tr",null,[s("th",null,"\u8A02\u55AE\u7DE8\u865F"),s("th",null,"\u8A02\u8CFC\u6703\u54E1"),s("th",null,"\u8A02\u8CFC\u65E5\u671F"),s("th",null,"\u8A02\u55AE\u91D1\u984D"),s("th",null,"\u5546\u54C1\u540D\u7A31"),s("th",null,"\u8655\u7406\u72C0\u614B"),s("th",null,"\u7BA1\u7406")])],-1)),ve={key:0},ye={key:1},be={key:2},ke=u("mdi-comment-outline"),xe=u("\u8A02\u55AE\u78BA\u8A8D\u4E2D "),Ie={key:3},we=u("mdi-comment-processing-outline"),Ce=u("\u5546\u54C1\u51FA\u8CA8\u4E2D "),Se={key:4},Re=u("mdi-comment-check-outline"),Pe=u("\u8A02\u55AE\u5DF2\u5B8C\u6210 "),Oe={key:5},ze=u("mdi-comment-remove-outline"),Ae=u("\u8A02\u55AE\u5DF2\u53D6\u6D88 "),De=u("\u7DE8\u8F2F"),$e=u("\u7DE8\u8F2F"),Ne={key:0},Ue=x(()=>s("td",{colspan:"5"},[s("h3",{class:"text-center"},"\u6C92\u6709\u8A02\u55AE")],-1)),qe=[Ue],Be=x(()=>s("div",{class:"text-h5 font-weight-bold text-center py-5"},"\u7DE8\u8F2F\u8A02\u55AE",-1)),Ee=u("\u53D6\u6D88"),Ge=u("\u78BA\u8A8D\u9001\u51FA"),Te={__name:"OrdersView",setup(d){const c=w([]),l=w({_id:"",email:"",tone:"",category:"\u8A02\u55AE\u78BA\u8A8D\u4E2D",dialog:!1,valid:!1,submitting:!1,idx:-1});w({required(n){return!!n||"\u5FC5\u586B"},email(n){return fe.exports.isEmail(n)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4"}});const _=5,m=K(1),V=R(()=>c.slice(m.value*_-_,m.value*_));R(()=>c.slice(0).reverse());const v=(n,o)=>{l._id=c[o]._id,l.tone=c[o].tone,l.idx=o,l.dialog=!0,l.valid=!1,l.submitting=!1},I=async()=>{l.submitting=!0;try{const{data:n}=await N.patch("/orders/"+l._id,l);c[l.idx].tone=n.result.tone,C.fire({title:"success //\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),l.dialog=!1}catch(n){C.fire({title:"ERROR //\u5931\u6557",text:n.isAxiosError?n.response.data.message:n.message})}l.submitting=!1};return(async()=>{try{const{data:n}=await N.get("/orders/all");c.push(...n.result.map(o=>(o.totalPrice=o.products.reduce((t,f)=>t+f.product.price*f.quantity,0),o)))}catch(n){console.log(n),C.fire({title:"ERROR //\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(n,o)=>(i(),r("div",ge,[e($,null,{default:a(()=>[e(S,{cols:"12"},{default:a(()=>[he]),_:1}),e(U),e(S,{cols:"12"},{default:a(()=>[e(H,null,{default:a(()=>[Ve,s("tbody",null,[(i(!0),r(P,null,q(Q(V),(t,f)=>(i(),r("tr",{key:t._id},[s("td",null,g(t._id),1),t.user===null?(i(),r("td",ve,"\u5E33\u865F\u5DF2\u7D93\u522A\u9664")):(i(),r("td",ye,g(t.user.email),1)),s("td",null,g(new Date(t.date).toLocaleDateString()),1),s("td",null,g(t.totalPrice),1),s("td",null,[s("ul",null,[(i(!0),r(P,null,q(t.products,p=>(i(),r("li",{key:p._id},g(p.product.name)+" x "+g(p.quantity),1))),128))])]),t.tone===0?(i(),r("td",be,[e(b,{size:"x-large",start:"",color:"red"},{default:a(()=>[ke]),_:1}),xe])):h("",!0),t.tone===1?(i(),r("td",Ie,[e(b,{size:"x-large",start:"",color:"yellow"},{default:a(()=>[we]),_:1}),Ce])):h("",!0),t.tone===2?(i(),r("td",Se,[e(b,{size:"x-large",start:"",color:"green"},{default:a(()=>[Re]),_:1}),Pe])):h("",!0),t.tone===3?(i(),r("td",Oe,[e(b,{size:"x-large",start:"",color:"blue"},{default:a(()=>[ze]),_:1}),Ae])):h("",!0),s("td",null,[m.value===1?(i(),E(y,{key:0,onClick:p=>v(t._id,f),variant:"outlined",plain:"",size:"x-small",rounded:"lg"},{default:a(()=>[De]),_:2},1032,["onClick"])):(i(),E(y,{key:1,onClick:p=>v(n.user._id,f+(m.value-1)*_),variant:"outlined",plain:"",size:"x-small",rounded:"lg"},{default:a(()=>[$e]),_:2},1032,["onClick"]))])]))),128)),c.length===0?(i(),r("tr",Ne,qe)):h("",!0)])]),_:1})]),_:1})]),_:1}),e(oe,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t),length:Math.ceil(c.length/_),rounded:"circle",class:"ma-5"},null,8,["modelValue","length"]),e(se,{modelValue:l.dialog,"onUpdate:modelValue":o[4]||(o[4]=t=>l.dialog=t)},{default:a(()=>[e(W,{rounded:"xl",width:"300"},{default:a(()=>[e(ue,{modelValue:l.valid,"onUpdate:modelValue":o[3]||(o[3]=t=>l.valid=t),onSubmit:X(I,["prevent"])},{default:a(()=>[e(Y,null,{default:a(()=>[Be,e(U)]),_:1}),e(Z,null,{default:a(()=>[e(B,null,{default:a(()=>[e($,null,{default:a(()=>[e(S,{cols:"12"},{default:a(()=>[e(pe,{modelValue:l.tone,"onUpdate:modelValue":o[1]||(o[1]=t=>l.tone=t),mandatory:""},{default:a(()=>[e(k,{label:"\u8A02\u55AE\u78BA\u8A8D\u4E2D",color:"red",value:"0"}),e(k,{label:"\u5546\u54C1\u51FA\u8CA8\u4E2D",color:"yellow",value:"1"}),e(k,{label:"\u8A02\u55AE\u5DF2\u5B8C\u6210",color:"green",value:"2"}),e(k,{label:"\u8A02\u55AE\u5DF2\u53D6\u6D88",color:"blue",value:"3"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(B,{class:"d-flex mt-n16"},{default:a(()=>[e(y,{onClick:o[2]||(o[2]=t=>l.dialog=!1),color:"red",variant:"tonal",disadled:l.submitting},{default:a(()=>[Ee]),_:1},8,["disadled"]),e(te),e(y,{type:"submit",variant:"tonal",loading:l.submitting,color:"green"},{default:a(()=>[Ge]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]))}};var He=J(Te,[["__scopeId","data-v-f7ddd67c"]]);export{He as default};
